<svg width="1100" height="720" viewBox="0 0 1100 720" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Background gradient -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#0d1117"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
    
    <!-- Service box styles -->
    <linearGradient id="serviceGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#21262d"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
    
    <linearGradient id="primaryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#238636"/>
      <stop offset="100%" stop-color="#1a7f37"/>
    </linearGradient>
    
    <linearGradient id="accentGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#1f6feb"/>
      <stop offset="100%" stop-color="#1158c7"/>
    </linearGradient>
    
    <linearGradient id="warnGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#d29922"/>
      <stop offset="100%" stop-color="#bb8009"/>
    </linearGradient>
    
    <!-- Drop shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b949e"/>
    </marker>
    
    <marker id="arrowheadOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d29922"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1100" height="720" fill="url(#bgGrad)" rx="12"/>
  
  <!-- Title -->
  <text x="550" y="40" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, -apple-system, sans-serif" font-size="24" font-weight="600">Archetype System Architecture</text>
  
  <!-- USERS LAYER -->
  <text x="50" y="95" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="2">USERS</text>
  
  <!-- Viewers -->
  <g filter="url(#shadow)">
    <rect x="350" y="70" width="160" height="60" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="430" y="105" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="14" font-weight="500">Viewers</text>
  </g>
  
  <!-- Editors -->
  <g filter="url(#shadow)">
    <rect x="590" y="70" width="160" height="60" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="670" y="105" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="14" font-weight="500">Editors</text>
  </g>
  
  <!-- EDGE LAYER -->
  <text x="50" y="195" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="2">EDGE</text>
  
  <!-- Nginx -->
  <g filter="url(#shadow)">
    <rect x="400" y="170" width="300" height="60" rx="8" fill="url(#primaryGrad)" stroke="#238636" stroke-width="1"/>
    <text x="550" y="205" text-anchor="middle" fill="#ffffff" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Nginx</text>
  </g>
  
  <!-- APPLICATION LAYER -->
  <text x="50" y="310" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="2">APPLICATION</text>
  
  <!-- Frontend -->
  <g filter="url(#shadow)">
    <rect x="200" y="285" width="180" height="80" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="290" y="330" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="14" font-weight="500">Frontend</text>
    <text x="290" y="350" text-anchor="middle" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11">Next.js</text>
  </g>
  
  <!-- API -->
  <g filter="url(#shadow)">
    <rect x="460" y="285" width="180" height="80" rx="8" fill="url(#accentGrad)" stroke="#1f6feb" stroke-width="1"/>
    <text x="550" y="330" text-anchor="middle" fill="#ffffff" font-family="system-ui, sans-serif" font-size="14" font-weight="600">API</text>
    <text x="550" y="350" text-anchor="middle" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">Django REST</text>
  </g>
  
  <!-- Celery -->
  <g filter="url(#shadow)">
    <rect x="720" y="285" width="180" height="80" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="810" y="330" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="14" font-weight="500">Workers</text>
    <text x="810" y="350" text-anchor="middle" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11">Celery</text>
  </g>
  
  <!-- DATA LAYER -->
  <text x="50" y="450" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="2">DATA</text>
  
  <!-- Postgres -->
  <g filter="url(#shadow)">
    <rect x="150" y="425" width="140" height="70" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="220" y="465" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="13" font-weight="500">Postgres</text>
  </g>
  
  <!-- Elasticsearch -->
  <g filter="url(#shadow)">
    <rect x="320" y="425" width="140" height="70" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="390" y="465" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="13" font-weight="500">Elasticsearch</text>
  </g>
  
  <!-- Redis -->
  <g filter="url(#shadow)">
    <rect x="490" y="425" width="140" height="70" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="560" y="465" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="13" font-weight="500">Redis</text>
  </g>
  
  <!-- SIPI -->
  <g filter="url(#shadow)">
    <rect x="660" y="425" width="140" height="70" rx="8" fill="url(#warnGrad)" stroke="#d29922" stroke-width="1"/>
    <text x="730" y="465" text-anchor="middle" fill="#ffffff" font-family="system-ui, sans-serif" font-size="13" font-weight="600">SIPI IIIF</text>
  </g>
  
  <!-- Shared Storage -->
  <g filter="url(#shadow)">
    <rect x="830" y="425" width="140" height="70" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="900" y="465" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="13" font-weight="500">Storage</text>
  </g>
  
  <!-- INFRASTRUCTURE LAYER -->
  <text x="50" y="565" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="2">INFRASTRUCTURE</text>
  
  <!-- Docker Compose -->
  <g filter="url(#shadow)">
    <rect x="250" y="545" width="280" height="60" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="390" y="580" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="14" font-weight="500">Docker Compose</text>
  </g>
  
  <!-- GitHub Actions -->
  <g filter="url(#shadow)">
    <rect x="570" y="545" width="280" height="60" rx="8" fill="url(#serviceGrad)" stroke="#30363d" stroke-width="1"/>
    <text x="710" y="580" text-anchor="middle" fill="#f0f6fc" font-family="system-ui, sans-serif" font-size="14" font-weight="500">GitHub Actions / GHCR</text>
  </g>
  
  <!-- CONNECTIONS -->
  <!-- Users to Nginx -->
  <line x1="430" y1="130" x2="480" y2="170" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="670" y1="130" x2="620" y2="170" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Nginx to Application -->
  <line x1="470" y1="230" x2="340" y2="285" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="550" y1="230" x2="550" y2="285" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="630" y1="230" x2="760" y2="285" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Frontend to API -->
  <line x1="380" y1="325" x2="460" y2="325" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- API to Workers -->
  <line x1="640" y1="325" x2="720" y2="325" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- API to Data -->
  <line x1="500" y1="365" x2="250" y2="425" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="530" y1="365" x2="390" y2="425" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="560" y1="365" x2="560" y2="425" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="590" y1="365" x2="700" y2="425" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Workers to Redis -->
  <line x1="780" y1="365" x2="590" y2="425" stroke="#d29922" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrowheadOrange)"/>
  
  <!-- Workers to Postgres -->
  <line x1="750" y1="365" x2="250" y2="425" stroke="#d29922" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrowheadOrange)"/>
  
  <!-- SIPI to Storage -->
  <line x1="800" y1="460" x2="830" y2="460" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Legend -->
  <rect x="50" y="640" width="1000" height="60" rx="8" fill="#21262d" stroke="#30363d" stroke-width="1"/>
  <text x="80" y="675" fill="#8b949e" font-family="system-ui, sans-serif" font-size="11">LEGEND:</text>
  
  <line x1="170" y1="670" x2="210" y2="670" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="220" y="675" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">Sync request</text>
  
  <line x1="340" y1="670" x2="380" y2="670" stroke="#d29922" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrowheadOrange)"/>
  <text x="390" y="675" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">Async job</text>
  
  <rect x="500" y="660" width="20" height="20" rx="4" fill="url(#primaryGrad)"/>
  <text x="530" y="675" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">Entry point</text>
  
  <rect x="640" y="660" width="20" height="20" rx="4" fill="url(#accentGrad)"/>
  <text x="670" y="675" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">Core service</text>
  
  <rect x="780" y="660" width="20" height="20" rx="4" fill="url(#warnGrad)"/>
  <text x="810" y="675" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">Media service</text>
</svg>
